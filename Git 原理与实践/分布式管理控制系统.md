# 分布式管理控制系统

## 版本控制系统

Version Control System

以写毕业论文为例，通常我们的文件夹是这样的

- 毕业论文
- 毕业论文1
- 毕业论文完结篇
- 毕业论文终结篇
- 毕业论文绝对不改篇

以上五个文件实际上就是五个版本

如果我在规定时间内完不成，就需要拉小明同学跟我一起完成，通常我们会商量好建一个网盘，比如百度网盘，我把写完的版本上传到上面，然后小明在工作的时候回去网盘上看一下有没有最新的版本，如果有的话先下载下来再开始工作，这就是中央版本控制系统的雏形

## 中央版本控制系统

Centralized Version Control System

我和小明都顺利毕业了，并且加入了同一个公司，公司的制度明显比学校严格

我和小明还有老板组建了三人的团队，决定开发一个网站，并使用中央是 VCS 来管理代码，工作流程通常是这样的

1. 老板兼技术总监会花几天搭建项目的框架
2. 然后在服务器上创建了一个中央仓库，并把代码提交上去
3. 我和小明从中央仓库上取到了最新的代码，三人开始并行开发
4. 我开发完一个新功能把代码提交到中央仓库
5. 小明和老板可以决定是否把这些代码同步到自己的机器上，保持本地的代码永远是最新的

这样，工作在有了制度之后也有了效率，三人共同开发就好像三人操作了同一个电脑一样

当然，实际的开发工作并没有简单到这种程度，因为你时常会需要处理代码冲突、查看版本历史、回退代码版本等

但是还可以更好

## 分布式版本控制系统

Distributed Version Control System

有一天公司由于不可抗力原因要断网一周，这可怎么办，我无法提交我代码的版本，因为我必须要联网到中央服务器才能提交

能不能继续写代码？可以！但是没有安全感，就好比我玩一个 RPG 游戏他突然不让我存档一样没有安全感

这就是分布式版本控制系统诞生的意义

分布式 VCS 除了中央仓库之外，还有本地仓库

团队中每一个成员的机器上都有一份本地仓库，这个仓库里包含了所有的版本历史，或者换句话说，每个人在自己的机器上就可以提交代码、查看历史，而无需联网和中央仓库交互

当然，取而代之的，你需要和本地仓库交互

说换就换，公司决定换用分布式版本控制系统来管理代码

1. 同样老板兼技术总监搭建项目框架
2. 同样在服务器上创建中央仓库并提交代码
3. 我和小明把中央仓库的代码克隆到本地，拥有了各自的版本库，开始并行开发
4. 我接到的是给项目开发一个商城的功能，我可以每次完成一个小功能点就提交一次，保存在本地仓库，即便断网状态下我也可以安心存档
5. 当我把商城开发好之后，就把这个功能的相关代码推送到中央仓库
6. 同样，小明和老板可以决定是否把这些代码同步到自己的机器上，保持本地的代码永远是最新的

可以看出分布式版本控制系统和中央式很相似，只不过把代码的提交和上传分开了

熟悉 `SVN` 的人知道 `SVN` 只有 `commit`

```
svn commit // 代表提交并推送到中央仓库了
```

而 `GIT` 通常需要 `commit` 和 `push`

```
git commit // 代表提交到了本地仓库，你存档了
git push // 代表把本地的版本库推送到了中央仓库，你告诉大家你存档了
```



